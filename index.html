<!DOCTYPE html>
<html lang='en'><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shonazarov Abdurahmon | IB Portfolio</title>
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700;800&amp;family=Poppins:wght@300;400;600&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --bg-dark: #0f172a;
            --primary: #38bdf8;
            --secondary: #818cf8;
            --accent: #fbbf24;
            --glass-bg: rgba(30, 41, 59, 0.65);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
        }

        /* --- RESET & BASIC SETUP --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* --- EDITABLE ZONES --- */
        [contenteditable="true"] {
            outline: 2px dashed var(--accent);
            padding: 2px;
            background: rgba(251, 191, 36, 0.1);
            border-radius: 4px;
        }

        /* --- ADMIN PANEL STYLES --- */
        #admin-bar {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            padding: 15px 20px;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 9999;
            border: 2px solid var(--primary);
            align-items: center;
            gap: 10px;
            white-space: nowrap;
            flex-wrap: wrap;
            justify-content: center;
        }

        .admin-btn {
            background: var(--primary);
            color: #0f172a;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.8rem;
        }

        .admin-btn.save { background: #22c55e; color: white; }
        .admin-btn.add-post { background: var(--accent); color: #0f172a; }
        .admin-btn.cancel { background: #ef4444; color: white; }

        /* --- ANIMATED BACKGROUND --- */
        .bg-glow {
            position: fixed;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            animation: floatOrb 10s infinite alternate;
        }

        .orb-1 {
            top: -10%;
            left: -10%;
            width: 50vw;
            height: 50vw;
            background: var(--secondary);
        }

        .orb-2 {
            bottom: -10%;
            right: -10%;
            width: 40vw;
            height: 40vw;
            background: var(--primary);
            animation-delay: -5s;
        }

        @keyframes floatOrb {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 50px); }
        }

        /* --- NAVIGATION --- */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 5%;
            height: 80px;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border);
        }

        .logo {
            font-family: 'Montserrat', sans-serif;
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--text-main);
        }

        .logo span { color: var(--primary); }

        .nav-menu {
            list-style: none;
            display: flex;
            gap: 30px;
        }

        .nav-link {
            color: var(--text-main);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            cursor: pointer;
            transition: 0.3s;
        }

        .nav-link:hover,
        .nav-link.active { color: var(--primary); }

        .nav-item { position: relative; }

        .dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: #1e293b;
            min-width: 200px;
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 10px 0;
        }

        .nav-item:hover .dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown a {
            display: block;
            padding: 10px 20px;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
        }

        .dropdown a:hover {
            color: var(--primary);
            padding-left: 25px;
            background: rgba(56, 189, 248, 0.1);
        }

        /* --- PAGE SECTIONS --- */
        .page-section {
            display: none;
            padding-top: 100px;
            padding-bottom: 60px;
            min-height: 100vh;
            animation: fadeIn 0.5s ease;
        }

        .page-section.active-page { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- HERO --- */
        .hero-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 50px;
            padding: 40px 10%;
            flex-wrap: wrap;
        }

        .profile-frame {
            position: relative;
            width: 320px;
            height: 320px;
            cursor: pointer;
            overflow: hidden;
            border-radius: 30px;
            border: 2px solid var(--glass-border);
        }

        .profile-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: 0.3s;
        }

        .hero-text h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 3.5rem;
            line-height: 1.1;
            margin-bottom: 15px;
            background: linear-gradient(to right, #fff, var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* --- CARDS & GRID --- */
        .section-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .glass-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            padding: 25px;
            border-radius: 16px;
            position: relative;
            margin-bottom: 20px; 
            transition: 0.3s;
        }
        
        .blog-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px;
            cursor: pointer;
            border: 2px dashed rgba(255,255,255,0.1);
        }
        
        .blog-date {
            font-size: 0.8rem;
            color: var(--primary);
            margin-bottom: 5px;
            display: block;
        }

        /* --- DELETE BUTTON (ADMIN ONLY) --- */
        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ef4444;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: none; /* Hidden unless in admin mode */
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            z-index: 10;
        }
        
        body.admin-active .delete-btn {
            display: flex; /* Show when admin mode is active */
        }

        /* --- FOOTER --- */
        footer {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
            border-top: 1px solid var(--glass-border);
            margin-top: 50px;
            font-size: 0.8rem;
        }

        .admin-trigger {
            color: #1e293b;
            cursor: pointer;
            transition: 0.3s;
        }

        .admin-trigger:hover { color: var(--text-muted); }

        /* --- MOBILE MENU --- */
        .menu-toggle {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-main);
        }

        @media (max-width: 768px) {
            .menu-toggle { display: block; }
            .hero-text h1 { font-size: 2.5rem; }
            .nav-menu {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 80px;
                left: 0;
                width: 100%;
                background: #1e293b;
                border-bottom: 1px solid var(--glass-border);
                padding: 20px 0;
                text-align: center;
                gap: 20px;
            }
            .nav-menu.active { display: flex; }
            .dropdown {
                position: static;
                opacity: 1;
                visibility: visible;
                transform: none;
                background: transparent;
                box-shadow: none;
                border: none;
                padding: 10px 0 0 0;
                display: none;
            }
            .nav-item:hover .dropdown { display: block; }
        }
    </style>
</head>

<body class="">

    <div class="bg-glow">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="logo">SHONAZAROV <span>A.</span></div>
        <div class="menu-toggle" onclick="toggleMenu()">
            <i class="fas fa-bars"></i>
        </div>
        <ul class="nav-menu" id="navMenu">
            <li class="nav-item"><a class="nav-link" onclick="switchPage('home'); toggleMenu()">Home</a></li>
            <li class="nav-item">
                <div class="nav-link">Grade 8 <i class="fas fa-chevron-down"></i></div>
                <div class="dropdown">
                    <a onclick="switchPage('grade8'); toggleMenu()">Archive</a>
                </div>
            </li>
            <li class="nav-item">
                <div class="nav-link">Grade 9 <i class="fas fa-chevron-down"></i></div>
                <div class="dropdown">
                    <a onclick="switchPage('grade9'); toggleMenu()">Subjects &amp; Blog</a>
                </div>
            </li>
        </ul>
    </nav>

    <!-- ADMIN PANEL -->
    <div id="admin-bar" style="display: none;">
        <span style="color:white; font-weight:600;">ADMIN</span>
        <button class="admin-btn add-post" onclick="createNewPost()">+ NEW POST</button>
        <button class="admin-btn save" onclick="saveSite()">SAVING...</button>
        <button class="admin-btn cancel" onclick="location.reload()">CANCEL</button>
    </div>

    <!-- Hidden File Input -->
    <input type="file" id="img-upload" style="display: none;" accept="image/*">

    <!-- ======================= HOME PAGE ======================= -->
    <section id="home" class="page-section">
        <div class="hero-container">
            <div class="profile-frame" onclick="triggerImageUpload(this)">
                <!-- Default Placeholder Image -->
                <img src="./image.png" class="profile-img">
            </div>
            <div class="hero-text">
                <div class="editable" contenteditable="false">IB STUDENT · CLASS OF 2025</div>
                <h1 class="editable" contenteditable="false">Shonazarov<br>Abdurahmon</h1>
                <p class="editable" contenteditable="false" style="color: var(--text-muted); font-size: 1.1rem; max-width: 500px; margin-bottom: 30px;">
                    A 9th-grade strategist with a passion for Chess, the agility of Volleyball, and the inquiring mind
                    of an IB learner.
                </p>
            </div>
        </div>
        <div class="section-container">
            <h2 class="editable" contenteditable="false" style="border-left: 5px solid var(--primary); padding-left: 15px;">My Passions</h2>
            <div class="grid-3">
                <div class="glass-card">
                    <h3 class="editable" contenteditable="false">Chess</h3>
                    <p class="editable" contenteditable="false" style="color: var(--text-muted); margin-top:10px;">
                        My arena for strategic thinking.
                    </p>
                </div>
                <div class="glass-card">
                    <h3 class="editable" contenteditable="false">Volleyball</h3>
                    <p class="editable" contenteditable="false" style="color: var(--text-muted); margin-top:10px;">
                        Training teamwork and reflexes.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- ======================= GRADE 8 PAGE ======================= -->
    <section id="grade8" class="page-section">
        <div class="section-container">
            <h1 class="editable" contenteditable="false">Grade 8 Archive</h1>
            <div class="grid-3">
                <div class="glass-card">
                    <h3 class="editable" contenteditable="false">Science Fair</h3>
                    <p class="editable" contenteditable="false">Won 2nd place for my physics project.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- ======================= GRADE 9 PAGE (BLOG AREA) ======================= -->
    <section id="grade9" class="page-section active-page">
        <div class="section-container">
            <h1 class="editable" contenteditable="false">Grade 9 Portfolio &amp; Blog</h1>

            <!-- ACADEMIC LIST -->
            <div style="margin-top: 40px;">
                <h2 class="editable" contenteditable="false" style="color:var(--primary);">Academic Subjects</h2>
                <div class="glass-card" style="margin-top: 20px;">
                    <p class="editable" contenteditable="false"><strong>Mathematics:</strong> Exploring Quadratics.</p>
                    <hr style="border-color: var(--glass-border); margin: 10px 0;">
                    <p class="editable" contenteditable="false"><br></p>
                </div>
            </div>

            <!-- BLOG / PROJECTS CONTAINER -->
            <div style="margin-top: 40px;" id="blog-section-title">
                <h2 class="editable" contenteditable="false" style="color:var(--primary);">Projects &amp; Blog</h2>
                <p style="color: var(--text-muted); font-size: 0.8rem; margin-bottom: 20px;">
                    *Admin Note: Click "+ NEW POST" to add entries here.*
                </p>
                
                <!-- NEW POSTS WILL BE ADDED HERE -->
                <div id="blog-container" class="grid-3">
                <div class="glass-card" style="animation: fadeIn 0.5s ease;">
                    <button class="delete-btn" onclick="deletePost(this)"><i class="fas fa-trash"></i></button>
                    <div onclick="triggerImageUpload(this)">
                        <img src="https://via.placeholder.com/600x400/1e293b/38bdf8?text=Click+to+Add+Image" class="blog-img">
                    </div>
                    <span class="blog-date editable" contenteditable="false">Today's Date</span>
                    <h3 class="editable" contenteditable="false">yo sup my nigga</h3>
                    <p class="editable" contenteditable="false" style="color: var(--text-muted); margin-top:10px;">
                        today the classes was awful i hated it</p>
                </div>
            
                
            
                    
                    <!-- Example Post -->
                    

                </div>
            </div>
        </div>
    </section>

    <footer>
        <p>© 2025 Shonazarov Abdurahmon. IB Portfolio.</p>
        <i class="fas fa-lock admin-trigger" onclick="adminLogin()"></i>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
        // ============================================
        // !!! CONFIGURED FOR YOUR REPO !!!
        // ============================================
        const GITHUB_USERNAME = "Abusheyh2"; 
        const REPO_NAME = "Abdurahmon_portfolio";
        const BRANCH_NAME = "main";
        const FILE_PATH = "index.html"; 

        // --- NAVIGATION ---
        function toggleMenu() {
            document.getElementById('navMenu').classList.toggle('active');
        }

        function switchPage(pageId) {
            document.querySelectorAll('.page-section').forEach(sec => sec.classList.remove('active-page'));
            document.getElementById(pageId).classList.add('active-page');
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            window.scrollTo(0, 0);
        }

        // --- ADMIN SYSTEM ---
        let isAdmin = false;
        let currentImgTarget = null;

        function adminLogin() {
            let pass = prompt("Enter Admin Password:");
            if (pass === "admin") {
                isAdmin = true;
                document.getElementById('admin-bar').style.display = 'flex';
                document.body.classList.add('admin-active'); // Show delete buttons
                toggleEditMode(true);
                alert("ADMIN MODE ACTIVE");
            } else {
                alert("Wrong password!");
            }
        }

        function toggleEditMode(enable) {
            document.querySelectorAll('.editable').forEach(el => {
                el.contentEditable = enable ? "true" : "false";
            });
        }

        // --- BLOG SYSTEM ---
        function createNewPost() {
            if (!isAdmin) return;

            // 1. Force switch to Grade 9 page so user sees the result
            switchPage('grade9');
            
            // 2. Create the HTML for a new post
            const newPostHTML = `
                <div class="glass-card" style="animation: fadeIn 0.5s ease;">
                    <button class="delete-btn" onclick="deletePost(this)"><i class="fas fa-trash"></i></button>
                    <div onclick="triggerImageUpload(this)">
                        <img src="https://via.placeholder.com/600x400/1e293b/38bdf8?text=Click+to+Add+Image" class="blog-img">
                    </div>
                    <span class="blog-date editable" contenteditable="true">Today's Date</span>
                    <h3 class="editable" contenteditable="true">New Blog Title</h3>
                    <p class="editable" contenteditable="true" style="color: var(--text-muted); margin-top:10px;">
                        Write your blog content here...
                    </p>
                </div>
            `;

            // 3. Insert it at the TOP of the blog container
            const container = document.getElementById('blog-container');
            container.insertAdjacentHTML('afterbegin', newPostHTML);

            // 4. Scroll to it
            document.getElementById('blog-section-title').scrollIntoView();
        }

        function deletePost(btn) {
            if(!isAdmin) return;
            if(confirm("Are you sure you want to delete this post?")) {
                btn.parentElement.remove();
            }
        }

        // --- IMAGE UPLOAD LOGIC ---
        function triggerImageUpload(wrapper) {
            if (!isAdmin) return;
            // Handle both generic wrappers and direct image clicks
            currentImgTarget = wrapper.tagName === 'IMG' ? wrapper : wrapper.querySelector('img');
            document.getElementById('img-upload').click();
        }

        document.getElementById('img-upload').addEventListener('change', function (e) {
            if (e.target.files && e.target.files[0]) {
                const file = e.target.files[0];
                if(file.size > 1000000) { 
                    alert("Warning: This image is large (>1MB). It might prevent saving to GitHub. Use a smaller image.");
                }
                const reader = new FileReader();
                reader.onload = function (e) {
                    if (currentImgTarget) {
                        currentImgTarget.src = e.target.result;
                    }
                }
                reader.readAsDataURL(file);
            }
        });

        // --- SAVE TO GITHUB ---
        async function saveSite() {
            const token = prompt("Paste GitHub Token to Save:");
            if (!token) return;

            const btn = document.querySelector('.admin-btn.save');
            const originalText = btn.innerText;
            btn.innerText = "SAVING...";

            // CLEANUP BEFORE SAVE
            document.getElementById('admin-bar').style.display = 'none';
            document.body.classList.remove('admin-active');
            toggleEditMode(false);

            let htmlContent = "<!DOCTYPE html>\n<html lang='en'>" + document.documentElement.innerHTML + "</html>";

            // RESTORE ADMIN UI
            document.getElementById('admin-bar').style.display = 'flex';
            document.body.classList.add('admin-active');
            toggleEditMode(true);

            try {
                // GET SHA
                const apiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/${FILE_PATH}`;
                const getRes = await fetch(apiUrl, {
                    headers: { 'Authorization': `token ${token}` }
                });
                
                if(!getRes.ok) throw new Error("Repo not found");
                const sha = (await getRes.json()).sha;

                // UPLOAD
                const putRes = await fetch(apiUrl, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${token}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: "Update via Admin Panel",
                        content: btoa(unescape(encodeURIComponent(htmlContent))),
                        sha: sha,
                        branch: BRANCH_NAME
                    })
                });

                if (putRes.ok) {
                    alert("SAVED! \n\nIMPORTANT: GitHub takes 60 seconds to update. \nIf you refresh now, you might see the old version. Wait 1 minute.");
                    btn.innerText = "SAVED!";
                    setTimeout(() => btn.innerText = originalText, 2000);
                } else {
                    throw new Error("Save failed");
                }
            } catch (err) {
                alert("Error: " + err.message);
                btn.innerText = "TRY AGAIN";
            }
        }
    </script>


</body></html>